(this["webpackJsonp@elgatoylacaja/auth"]=this["webpackJsonp@elgatoylacaja/auth"]||[]).push([[1],{220:function(e,a,t){"use strict";t.r(a);var n=t(3),r=t(6),o=t.n(r),i=t(12),s=t(8),c=t(0),l=t.n(c),m=t(202),p=t(205),d=t(139),u=t(206),g=t(162),x=t(55),h=t(87),f=t(50),b=t(44),y=t(112),E=t(92),v=t(88),w=t(123),C=E.c.GoogleLoginConfig,k=E.c.FacebookLogin,j=Object(m.a)({servicesLoginContainer:{justifyContent:"space-between",marginTop:"10px","@media only screen and (max-width : 600px)":{flexDirection:"column"}},googleBtn:{height:"60px",color:"#979797",backgroundColor:"white",marginLeft:"16px",border:"1px solid #979797",borderRadius:"3px",maxHeight:"60px",padding:"20px",paddingTop:"10px",paddingBottom:"10px",textTransform:"none",fontWeight:400,flex:1,"@media only screen and (max-width : 600px)":{marginLeft:"0px",marginTop:"10px",flex:"initial"}},fbBtn:{height:"60px",color:"white",backgroundColor:"#4267B2",marginRight:"16px",borderRadius:"3px",maxHeight:"60px",padding:"20px",paddingTop:"10px",paddingBottom:"10px",textTransform:"none",fontWeight:400,flex:1,"@media only screen and (max-width : 600px)":{marginRight:"0px",flex:"initial"}},btnLabel:{display:"flex",alignItems:"center",justifyContent:"flex-start"},btnIcon:{width:"25px",display:"flex",justifyContent:"flex-start",alignItems:"center",marginRight:"15px"},btnText:{lineHeight:"24px",fontSize:"18px","@media only screen and (max-width : 600px)":{width:"100%"}},eyeIcon:{padding:"5px"},footerContainer:{backgroundColor:"var(--gray-light)",height:"96px",width:"100vw",position:"absolute",bottom:"0","@media only screen and (min-width: 800px)":{left:"calc((100vw - 800px) / (-2))"},"@media only screen and (max-width: 800px)":{position:"relative",marginLeft:"-24px",marginBottom:"-24px",marginTop:"auto",height:"fit-content"},display:"flex",justifyContent:"center",alignItems:"center"},cardContainer:{"@media only screen and (min-width: 800px)":{marginBottom:"calc(96px - 24px + 37px) !important"}},footerText:{fontSize:"14px !important",lineHeight:"24px !important",padding:"0 24px",boxSizing:"border-box",maxWidth:"800px","@media only screen and (max-width: 800px)":{padding:"24px 24px 20px 24px"}}}),I=y.b().shape({email:y.c().email("No es un email v\xe1lido").required("Este campo es requerido"),password:y.c().required("Este campo es requerido")});a.default=Object(x.g)((function(e){var a=j(),t=Object(h.o)(),r=Object(b.c)(),c=r.startLoading,m=r.stopLoading,x=l.a.useState(""),y=Object(s.a)(x,2),S=y[0],T=y[1],N=l.a.useContext(v.a).dispatch,L=function(){var e=Object(i.a)(o.a.mark((function e(a,t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Login correcto: ".concat(a,", token: ").concat(t)),N({type:"LOGIN",accessToken:t}),m();case 3:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();l.a.useEffect((function(){E.a.EVENT({category:"Login",action:"Visit Login"})}),[]),l.a.useEffect((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(a){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getAuthResponse(),e.prev=1,e.next=4,E.b.googleLogin({token:t.id_token});case 4:n=e.sent,r=n.data.accessToken,L("google",r),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),m(),console.error(e.t0),T("Hubo un error al ingresar con google");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();C(document.getElementById("googleSignInButton"),e,(function(e){console.error(e),m(),T("Hubo un error al ingresar con google")}))}),[]);var O=function(){var e=Object(i.a)(o.a.mark((function e(a,t){var n,r,i,s,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.email,r=a.password,i=t.setFieldError,E.a.CLICK_SERVICE("email"),c(),e.prev=4,e.next=7,w.a.login({email:n,password:r});case 7:s=e.sent,l=s.accessToken,L("email",l),e.next=19;break;case 12:e.prev=12,e.t0=e.catch(4),p=e.t0.status,e.t0.error,m(),T(""),403===p?(E.a.ERROR_SERVICE("email","(password)"),i("password","Contrase\xf1a incorrecta")):404===p&&(E.a.ERROR_SERVICE("email","(no existe)"),i("email","No existe un usuario con ese email"));case 19:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(a,t){return e.apply(this,arguments)}}(),R=l.a.useState(!1),B=Object(s.a)(R,2),H=B[0],V=B[1],q=function(){var e=Object(i.a)(o.a.mark((function e(a){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.authResponse){e.next=17;break}return e.prev=1,e.next=4,E.b.fbLogin({token:a.authResponse.accessToken});case 4:t=e.sent,n=t.data.accessToken,L("facebook",n),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),m(),T("Hubo un error al ingresar con facebook, al reintentar revisa los permisos necesarios"),V(!0);case 15:e.next=21;break;case 17:console.error("User cancelled login or did not fully authorize."),m(),T("Hubo un error al ingresar con facebook, al reintentar revisa los permisos necesarios"),V(!0);case 21:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),z=l.a.useState(!1),_=Object(s.a)(z,2),A=_[0],D=_[1],F=l.a.useState(!1),G=Object(s.a)(F,2),P=G[0],W=G[1],K=l.a.useState(!1),M=Object(s.a)(K,2),J=M[0],U=M[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:t.hola,style:{}},l.a.createElement("span",null,"\xa1Hola!")),l.a.createElement("div",{className:t.authCardContainer+" "+a.cardContainer},l.a.createElement(p.a,{container:!0,style:{marginTop:10,flexDirection:"column"}},l.a.createElement(d.a,{variant:"h1",className:t.titleDisplay},"Sumate a hacer ciencia colectiva"),l.a.createElement(d.a,{variant:"body1",className:t.link,onClick:function(){W((function(e){return!e})),J||(E.a.EVENT({category:"Auth Disclaimer",action:"Click expand disclaimer"}),U(!0))},style:{display:"flex",alignItems:"center"}},"\xbfPor qu\xe9 tengo que iniciar sesi\xf3n?"," ",l.a.createElement("span",{style:{marginLeft:"6px",display:"flex",justifyContent:"center",alignItems:"center"}},P?l.a.createElement(h.c,{color:"var(--primary)"}):l.a.createElement(h.b,{color:"var(--primary)"}))),l.a.createElement(d.a,{variant:"body1",className:t.text,style:{transition:P?"max-height 0.25s ease-in":"max-height 0.15s ease-out",overflow:"hidden",maxHeight:P?"1000px":"0px",marginBottom:"40px"}},"Es necesario iniciar sesi\xf3n para evitar que repitas un experimento y tomemos una muestra dos veces. Todos los datos est\xe1n anonimizados, son usados exclusivamente para investigaci\xf3n cient\xedfica y son publicados de manera abierta y puestos a disposici\xf3n de la comunidad cient\xedfica conjuntamente con los papers.")),l.a.createElement(p.a,{style:{marginTop:10}},l.a.createElement(h.f,{condition:""!==S,message:S}),l.a.createElement(p.a,{container:!0,className:a.servicesLoginContainer},l.a.createElement(h.a,{onClick:function(){E.a.CLICK_SERVICE("facebook"),c();try{k(q,H)}catch(e){m(),console.log(e)}},className:a.fbBtn,color:"facebook",label:l.a.createElement("div",{className:a.btnLabel},l.a.createElement("div",{className:a.btnIcon},l.a.createElement(h.i,{style:{width:"100%"},color:"white"})),l.a.createElement("span",{className:a.btnText},"Ingresar con ",l.a.createElement("b",null,"Facebook")))}),l.a.createElement(h.a,{onClick:function(){E.a.CLICK_SERVICE("google"),c()},className:a.googleBtn,color:"google",id:"googleSignInButton",label:l.a.createElement("div",{className:a.btnLabel},l.a.createElement("div",{className:a.btnIcon},l.a.createElement(h.j,{style:{width:"100%"}})),l.a.createElement("span",{className:a.btnText},"Ingresar con ",l.a.createElement("b",null,"Google")))})),l.a.createElement(p.a,{style:{margin:"40px 0 12px 0"},justify:"center",alignItems:"center",container:!0},l.a.createElement(u.a,{style:{width:"40%",height:"2px",backgroundColor:"var(--gray)",display:"inline-flex"}}),l.a.createElement(d.a,{style:{width:"20%",margin:"0",textAlign:"center",fontFamily:"Gotham",fontSize:"18px",lineHeight:"27px",color:"var(--gray-dark)",fontWeight:600}},"O"),l.a.createElement(u.a,{style:{width:"40%",height:"2px",backgroundColor:"var(--gray)",display:"inline-flex"}})),l.a.createElement(f.b,{initialValues:{email:"",password:""},onSubmit:O,validationSchema:I},(function(e){var r=e.values,o=e.handleChange,i=e.handleBlur,s=e.handleSubmit,c=e.errors,m=(e.submitCount,Object(n.a)(e,["values","handleChange","handleBlur","handleSubmit","errors","submitCount"]));return l.a.createElement("form",{onSubmit:s},l.a.createElement(h.n,{value:r.email,onChange:o,onBlur:i,label:"Email",type:"email",inputProps:{inputMode:"email"},autoComplete:"email",id:"email",error:void 0!==c.email&&m.touched.email,errorMessage:c.email,handleError:!0}),l.a.createElement(h.n,{value:r.password,onChange:o,onBlur:i,label:"Contrase\xf1a",type:A?"text":"password",id:"password",autoComplete:"current-password",InputProps:{endAdornment:l.a.createElement(g.a,{onClick:function(){return D((function(e){return!e}))},className:a.eyeIcon},A?l.a.createElement(h.h,{color:"var(--gray-dark)"}):l.a.createElement(h.g,{color:"var(--gray-dark)"}))},error:void 0!==c.password&&m.touched.password,errorMessage:c.password,handleError:!0}),l.a.createElement("div",{style:{width:"100%",textAlign:"right"}},l.a.createElement(h.k,{color:"var(--secondary)",to:"/reset",style:{fontSize:"12px"}},"Olvid\xe9 mi contrase\xf1a")),l.a.createElement(h.a,{style:{marginTop:"40px"},id:"button-login",color:"primary",label:"Ingresar",type:"submit"}),l.a.createElement(d.a,{className:t.p,style:{fontSize:"16px",textAlign:"center",marginBottom:"45px"}},"\xbfTodav\xeda no ten\xe9s cuenta?"," ",l.a.createElement(h.k,{color:"var(--primary)",to:"/signup"},"Crear cuenta")))})))),l.a.createElement("div",{className:a.footerContainer},l.a.createElement(d.a,{className:t.text+" "+a.footerText},"Pod\xe9s ver todos los experimentos, diarios de investigaci\xf3n, papers publicados y datasets en"," ",l.a.createElement("a",{target:"_blank",href:"https://elgatoylacaja.com.ar/labs",rel:"noopener noreferrer",style:{color:"var(--primary)",textDecoration:"none"}},"https://elgatoylacaja.com.ar/labs")," ","o escribirnos a"," ",l.a.createElement("a",{href:"mailto:labs@elgatoylacaja.com",style:{color:"var(--primary)",textDecoration:"none"}},"labs@elgatoylacaja.com")," ","por cualquier consulta.")))}))}}]);
//# sourceMappingURL=Login.44d3af5a.chunk.js.map